{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"C:/Users/Brand/Dev/VotingApp/VotingApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/Brand/Dev/VotingApp/VotingApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Brand/Dev/VotingApp/VotingApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Brand/Dev/VotingApp/VotingApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Brand/Dev/VotingApp/VotingApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Brand/Dev/VotingApp/VotingApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Navbar from'../components/Navbar';import{Redirect}from'react-router-dom';var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.state={username:null,password:null,loggedin:false,error:false};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"handleSubmit\",value:function handleSubmit(e){var _this2=this;e.preventDefault();fetch('http://127.0.0.1:8000/api/token-auth/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"username\":this.state.username,\"password\":this.state.password})}).then(function(response){return response.json();}).then(function(data){try{if(data.user.username){localStorage.setItem('token',data.token);localStorage.setItem('user',data.user.username);_this2.setState({loggedin:true});}}catch(_unused){_this2.setState({error:true});}});}},{key:\"handleChange\",value:function handleChange(e){e.preventDefault();this.setState(_defineProperty({},e.target.name,e.target.value));}},{key:\"render\",value:function render(){if(this.state.loggedin){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"register-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"LOG IN\"}),this.state.error&&/*#__PURE__*/_jsx(\"h2\",{className:\"register-error\",children:\"Username already exists!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,className:\"register-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",onChange:this.handleChange,placeholder:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",onChange:this.handleChange,placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"register-form-submit\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"LOG IN\"})})]})})]})]});}}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["C:/Users/Brand/Dev/VotingApp/VotingApp/frontend/src/pages/login.jsx"],"names":["React","Navbar","Redirect","Login","state","username","password","loggedin","error","handleSubmit","bind","handleChange","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","response","json","data","user","localStorage","setItem","token","setState","target","name","value","Component"],"mappings":"8jCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,OAASC,QAAT,KAAyB,kBAAzB,C,GAEMC,CAAAA,K,0GACF,gBAAc,uCACV,wBACA,MAAKC,KAAL,CAAa,CACTC,QAAQ,CAAE,IADD,CAETC,QAAQ,CAAE,IAFD,CAGTC,QAAQ,CAAE,KAHD,CAITC,KAAK,CAAE,KAJE,CAAb,CAMA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CACA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBD,IAAlB,+BAApB,CATU,aAUb,C,oEAEYE,C,CAAG,iBACZA,CAAC,CAACC,cAAF,GACAC,KAAK,CAAC,uCAAD,CAA0C,CAC3CC,MAAM,CAAE,MADmC,CAE3CC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAFkC,CAG3CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjB,WAAY,KAAKf,KAAL,CAAWC,QADN,CAEjB,WAAY,KAAKD,KAAL,CAAWE,QAFN,CAAf,CAHqC,CAA1C,CAAL,CAQKc,IARL,CAQU,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EARlB,EASKF,IATL,CASU,SAAAG,IAAI,CAAI,CACV,GAAI,CACA,GAAIA,IAAI,CAACC,IAAL,CAAUnB,QAAd,CAAwB,CACpBoB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BH,IAAI,CAACI,KAAnC,EACAF,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BH,IAAI,CAACC,IAAL,CAAUnB,QAAvC,EACA,MAAI,CAACuB,QAAL,CAAc,CAAErB,QAAQ,CAAE,IAAZ,CAAd,EACH,CACJ,CAAC,cAAM,CACJ,MAAI,CAACqB,QAAL,CAAc,CAAEpB,KAAK,CAAE,IAAT,CAAd,EACH,CACJ,CAnBL,EAoBH,C,kDAEYI,C,CAAG,CACZA,CAAC,CAACC,cAAF,GACA,KAAKe,QAAL,oBACKhB,CAAC,CAACiB,MAAF,CAASC,IADd,CACqBlB,CAAC,CAACiB,MAAF,CAASE,KAD9B,GAGH,C,uCAEQ,CACL,GAAI,KAAK3B,KAAL,CAAWG,QAAf,CAAyB,CACrB,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CAFD,IAEO,CACH,mBACI,oCACI,KAAC,MAAD,IADJ,cAEI,aAAK,SAAS,CAAC,oBAAf,wBACI,8BADJ,CAEK,KAAKH,KAAL,CAAWI,KAAX,eACG,WAAI,SAAS,CAAC,gBAAd,sCAHR,cAKI,YAAK,SAAS,CAAC,gBAAf,uBACI,cAAM,QAAQ,CAAE,KAAKC,YAArB,CAAmC,SAAS,CAAC,eAA7C,wBACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,UAAxB,CAAmC,QAAQ,CAAE,KAAKE,YAAlD,CAAgE,WAAW,CAAC,UAA5E,EADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,UAA5B,CAAuC,QAAQ,CAAE,KAAKA,YAAtD,CAAoE,WAAW,CAAC,UAAhF,EAFJ,cAGI,YAAK,SAAS,CAAC,sBAAf,uBACI,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,QAA3B,EADJ,EAHJ,GADJ,EALJ,GAFJ,GADJ,CAoBH,CACJ,C,mBArEeX,KAAK,CAACgC,S,EAwE1B,cAAe7B,CAAAA,KAAf","sourcesContent":["import React from 'react'\r\nimport Navbar from '../components/Navbar'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nclass Login extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            username: null,\r\n            password: null,\r\n            loggedin: false,\r\n            error: false,\r\n        }\r\n        this.handleSubmit = this.handleSubmit.bind(this)\r\n        this.handleChange = this.handleChange.bind(this)\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault()\r\n        fetch('http://127.0.0.1:8000/api/token-auth/', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                \"username\": this.state.username,\r\n                \"password\": this.state.password,\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                try {\r\n                    if (data.user.username) {\r\n                        localStorage.setItem('token', data.token)\r\n                        localStorage.setItem('user', data.user.username)\r\n                        this.setState({ loggedin: true })\r\n                    }\r\n                } catch {\r\n                    this.setState({ error: true })\r\n                }\r\n            })\r\n    }\r\n\r\n    handleChange(e) {\r\n        e.preventDefault()\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loggedin) {\r\n            return <Redirect to='/' />\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <Navbar />\r\n                    <div className=\"register-container\">\r\n                        <h1>LOG IN</h1>\r\n                        {this.state.error &&\r\n                            <h2 className=\"register-error\">Username already exists!</h2>\r\n                        }\r\n                        <div className=\"form-container\">\r\n                            <form onSubmit={this.handleSubmit} className=\"register-form\">\r\n                                <input type=\"text\" name=\"username\" onChange={this.handleChange} placeholder=\"Username\" />\r\n                                <input type=\"password\" name=\"password\" onChange={this.handleChange} placeholder=\"Password\" />\r\n                                <div className=\"register-form-submit\">\r\n                                    <input type=\"submit\" value=\"LOG IN\" />\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}