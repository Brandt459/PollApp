{"version":3,"sources":["components/Navbar.js","images/trash.svg","components/Polls.js","pages/home.jsx","pages/register.jsx","pages/login.jsx","index.js"],"names":["Navbar","state","username","loggedIn","localStorage","getItem","handleLogout","bind","this","setState","removeItem","window","location","reload","to","onClick","React","Component","Polls","pollList","data","resultsStartIndex","resultsEndIndex","resultsPerRender","loadPolls","updatePoll","pollVote","createPoll","deletePoll","fetch","then","response","json","prevState","concat","slice","e","preventDefault","index","ReactDOM","findDOMNode","target","parentNode","getAttribute","poll","userId","parseInt","name","push","method","headers","body","JSON","stringify","polls","classList","add","querySelectorAll","forEach","button","disabled","querySelector","value","reset","splice","className","onSubmit","id","style","flex","type","required","placeholder","map","user","includes","indexOf","src","trash","alt","length","class","Home","Register","password","redirect","error","handleSubmit","handleChange","token","setItem","jwt_decode","onChange","Login","loggedin","render","StrictMode","exact","path","component","document","getElementById"],"mappings":"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","file":"static/js/main.c9f34bce.chunk.js","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nclass Navbar extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            username: null,\r\n            loggedIn: localStorage.getItem('token') ? true : false,\r\n        }\r\n        this.handleLogout = this.handleLogout.bind(this)\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.state.loggedIn) {\r\n            this.setState({ username: localStorage.getItem('user') })\r\n        }\r\n    }\r\n\r\n    handleLogout() {\r\n        localStorage.removeItem('token')\r\n        localStorage.removeItem('user')\r\n        localStorage.removeItem('userId')\r\n        this.setState({\r\n            loggedIn: false,\r\n            username: null,\r\n        })\r\n        window.location.reload(false)\r\n    }\r\n\r\n    render() {\r\n        const username = this.state.username\r\n        return (\r\n            <nav>\r\n                <Link to=\"/\">Home</Link>\r\n                {username ?\r\n                    <ul>\r\n                        <li>{username}</li>\r\n                        <li onClick={this.handleLogout}><Link>Log out</Link></li>\r\n                    </ul>\r\n                    :\r\n\r\n                    <ul>\r\n                        <li><Link to=\"/register\">Register</Link></li>\r\n                        <li><Link to=\"/login\">Log in</Link></li>\r\n                    </ul>\r\n                }\r\n            </nav>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Navbar","export default __webpack_public_path__ + \"static/media/trash.f1497a79.svg\";","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport trash from '../images/trash.svg'\r\n\r\nclass Polls extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            pollList: [],\r\n            data: [],\r\n            resultsStartIndex: 0,\r\n            resultsEndIndex: 3,\r\n            resultsPerRender: 3\r\n        }\r\n        this.loadPolls = this.loadPolls.bind(this)\r\n        this.updatePoll = this.updatePoll.bind(this)\r\n        this.pollVote = this.pollVote.bind(this)\r\n        this.createPoll = this.createPoll.bind(this)\r\n        this.deletePoll = this.deletePoll.bind(this)\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch('/api/poll-list/')\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                this.loadPolls(data)\r\n                this.setState({ data: data })\r\n            })\r\n    }\r\n\r\n    loadPolls(data) {\r\n        this.setState((prevState) => ({\r\n            pollList: prevState.pollList.concat(data.slice(prevState.resultsStartIndex, prevState.resultsEndIndex)),\r\n            resultsStartIndex: prevState.resultsStartIndex + prevState.resultsPerRender,\r\n            resultsEndIndex: prevState.resultsEndIndex + prevState.resultsPerRender\r\n        }))\r\n    }\r\n\r\n    updatePoll(e) {\r\n        e.preventDefault()\r\n        const index = ReactDOM.findDOMNode(e.target).parentNode.parentNode.getAttribute(\"id\")\r\n        let poll = this.state.pollList[index]\r\n        const userId = parseInt(localStorage.getItem('userId'))\r\n        poll[e.target.name] = poll[e.target.name] + 1\r\n        poll[\"votes\"].push(userId)\r\n        if (e.target.name === 'option1total') {\r\n            poll[\"option1votes\"].push(userId)\r\n        } else {\r\n            poll[\"option2votes\"].push(userId)\r\n        }\r\n        fetch(`/api/update/${poll[\"id\"]}/`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(poll)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                let polls = [...this.state.pollList]\r\n                polls[index] = data\r\n                this.setState({\r\n                    pollList: polls,\r\n                })\r\n            })\r\n    }\r\n\r\n    pollVote(e) {\r\n        this.updatePoll(e)\r\n        e.target.classList.add(\"active\")\r\n        ReactDOM.findDOMNode(e.target).parentNode.parentNode.classList.add(\"voted\")\r\n        const buttons = ReactDOM.findDOMNode(e.target).parentNode.querySelectorAll('button')\r\n        buttons.forEach(button => button.disabled = true)\r\n    }\r\n\r\n    createPoll(e) {\r\n        e.preventDefault()\r\n        fetch('/api/create-poll/', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                \"title\": e.target.querySelector(\"#form-title\").value,\r\n                \"option1\": e.target.querySelector(\"#form-option1\").value,\r\n                \"option2\": e.target.querySelector(\"#form-option2\").value,\r\n                \"owner\": localStorage.getItem('user')\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                this.setState({\r\n                    pollList: [...this.state.pollList, data]\r\n                })\r\n            })\r\n        e.target.reset()\r\n    }\r\n\r\n    deletePoll(e) {\r\n        e.preventDefault()\r\n        const index = ReactDOM.findDOMNode(e.target).parentNode.getAttribute(\"id\")\r\n        let poll = this.state.pollList[index]\r\n        fetch(`/api/delete-poll/${poll[\"id\"]}/`, {\r\n            method: 'DELETE'\r\n        })\r\n        let polls = [...this.state.pollList]\r\n        polls.splice(index, 1)\r\n        this.setState({\r\n            pollList: polls\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const pollList = this.state.pollList\r\n        const data = this.state.data\r\n        try {\r\n            return (\r\n                <div>\r\n                    {localStorage.getItem('token') ?\r\n                        <div className=\"poll-create\">\r\n                            <h1>Create a poll: </h1>\r\n                            <form onSubmit={this.createPoll} id=\"poll-form\">\r\n                                <input style={{ flex: 3 }} type=\"text\" id=\"form-title\" required placeholder=\"Title\" />\r\n                                <input style={{ flex: 3 }} type=\"text\" id=\"form-option1\" required placeholder=\"Option 1\" />\r\n                                <input style={{ flex: 3 }} type=\"text\" id=\"form-option2\" required placeholder=\"Option 2\" />\r\n                                <input style={{ flex: 1 }} type=\"submit\" id=\"form-submit\" placeholder=\"Submit\" />\r\n                            </form>\r\n                        </div>\r\n                        :\r\n                        <div className=\"login-statement\">\r\n                            <h1>Log in to vote and create polls</h1>\r\n                        </div>\r\n                    }\r\n                    <div className=\"polls\">\r\n                        {pollList.map(poll => {\r\n                            const userId = parseInt(localStorage.getItem('userId'))\r\n                            const user = localStorage.getItem('user')\r\n                            return (\r\n                                <div className={`poll ${poll[\"votes\"].includes(userId) ? \"voted\" : \"\"} ${poll[\"owner\"] === user ? \"owned\" : \"\"}`} id={pollList.indexOf(poll)}>\r\n                                    <h1 className=\"poll-title\">{poll[\"title\"]}</h1>\r\n                                    {poll[\"owner\"] === user &&\r\n                                        <img src={trash} alt=\"trash\" className=\"trash-icon\" onClick={this.deletePoll} />\r\n                                    }\r\n                                    <div className=\"poll-options\">\r\n                                        <button onClick={this.pollVote} name=\"option1total\" className={`poll-button ${poll[\"option1votes\"].includes(userId) ? \"active\" : \"\"}`} disabled={!localStorage.getItem('token') || poll[\"votes\"].includes(userId)}>{poll[\"option1\"]}</button>\r\n                                        <button onClick={this.pollVote} name=\"option2total\" className={`poll-button ${poll[\"option2votes\"].includes(userId) ? \"active\" : \"\"}`} disabled={!localStorage.getItem('token') || poll[\"votes\"].includes(userId)}>{poll[\"option2\"]}</button>\r\n                                    </div>\r\n                                    <div className=\"poll-results\">\r\n                                        <p>Total votes: </p>\r\n                                        <div className=\"votes-container\">\r\n                                            <div className=\"votes\">\r\n                                                <p>{poll[\"option1total\"]}</p>\r\n                                                <p>{poll[\"option2total\"]}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                        {!(pollList.length === data.length) &&\r\n                            <button className=\"load-polls\" onClick={() => this.loadPolls(data)}><i class=\"arrow-down\" /></button>\r\n                        }\r\n                    </div>\r\n                </div >\r\n            )\r\n        } catch {\r\n            return <h1>Loading...</h1>\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default Polls;\r\n","import React from 'react'\r\nimport Navbar from '../components/Navbar'\r\nimport Polls from '../components/Polls'\r\n\r\nfunction Home() {\r\n    return (\r\n        <div>\r\n            <Navbar />\r\n            <Polls />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home","import React from 'react'\r\nimport Navbar from '../components/Navbar'\r\nimport { Redirect } from 'react-router-dom'\r\nimport jwt_decode from 'jwt-decode'\r\n\r\nclass Register extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            username: null,\r\n            password: null,\r\n            redirect: false,\r\n            error: false,\r\n        }\r\n        this.handleSubmit = this.handleSubmit.bind(this)\r\n        this.handleChange = this.handleChange.bind(this)\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault()\r\n        fetch('/api/users/', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                \"username\": this.state.username,\r\n                \"password\": this.state.password,\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data.token) {\r\n                    localStorage.setItem('token', data.token)\r\n                    localStorage.setItem('user', jwt_decode(data.token)[\"username\"])\r\n                    fetch('/api/user_id/', {\r\n                        method: 'POST',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({ \"username\": localStorage.getItem('user') })\r\n                    })\r\n                        .then(response => response.json())\r\n                        .then(data => localStorage.setItem('userId', data))\r\n                    this.setState({ redirect: true })\r\n                } else {\r\n                    this.setState({ error: true })\r\n                }\r\n            })\r\n    }\r\n\r\n    handleChange(e) {\r\n        e.preventDefault()\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if (this.state.redirect) {\r\n            return <Redirect to='/' />\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <Navbar />\r\n                    <div className=\"register-container\">\r\n                        <h1>REGISTER</h1>\r\n                        {this.state.error &&\r\n                            <h2 className=\"register-error\">Username already exists!</h2>\r\n                        }\r\n                        <div className=\"form-container\">\r\n                            <form onSubmit={this.handleSubmit} className=\"register-form\">\r\n                                <input type=\"text\" name=\"username\" onChange={this.handleChange} placeholder=\"Username\" />\r\n                                <input type=\"password\" name=\"password\" onChange={this.handleChange} placeholder=\"Password\" />\r\n                                <div className=\"register-form-submit\">\r\n                                    <input type=\"submit\" value=\"REGISTER\" />\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default Register","import React from 'react'\r\nimport Navbar from '../components/Navbar'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nclass Login extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            username: null,\r\n            password: null,\r\n            loggedin: false,\r\n            error: false,\r\n        }\r\n        this.handleSubmit = this.handleSubmit.bind(this)\r\n        this.handleChange = this.handleChange.bind(this)\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault()\r\n        fetch('/api/token-auth/', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                \"username\": this.state.username,\r\n                \"password\": this.state.password,\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                try {\r\n                    if (data.user.username) {\r\n                        localStorage.setItem('token', data.token)\r\n                        localStorage.setItem('user', data.user.username)\r\n                        fetch('/api/user_id/', {\r\n                            method: 'POST',\r\n                            headers: { 'Content-Type': 'application/json' },\r\n                            body: JSON.stringify({ \"username\": localStorage.getItem('user') })\r\n                        })\r\n                            .then(response => response.json())\r\n                            .then(data => {\r\n                                localStorage.setItem('userId', data)\r\n                            })\r\n                        this.setState({ loggedin: true })\r\n                    }\r\n                } catch {\r\n                    this.setState({ error: true })\r\n                }\r\n            })\r\n    }\r\n\r\n    handleChange(e) {\r\n        e.preventDefault()\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loggedin) {\r\n            return <Redirect to='/' />\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <Navbar />\r\n                    <div className=\"register-container\">\r\n                        <h1>LOG IN</h1>\r\n                        {this.state.error &&\r\n                            <h2 className=\"register-error\">Invalid credentials!</h2>\r\n                        }\r\n                        <div className=\"form-container\">\r\n                            <form onSubmit={this.handleSubmit} className=\"register-form\">\r\n                                <input type=\"text\" name=\"username\" onChange={this.handleChange} placeholder=\"Username\" />\r\n                                <input type=\"password\" name=\"password\" onChange={this.handleChange} placeholder=\"Password\" />\r\n                                <div className=\"register-form-submit\">\r\n                                    <input type=\"submit\" value=\"LOG IN\" />\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default Login","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './css/polls.css'\nimport './css/navbar.css'\nimport './css/register.css'\nimport {\n  BrowserRouter,\n  Route,\n  Switch,\n  Redirect\n} from \"react-router-dom\"\nimport Home from './pages/home'\nimport Register from './pages/register'\nimport Login from './pages/login'\n\nconst loggedIn = localStorage.getItem('token') ? true : false\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/register\" component={Register}>\n          {loggedIn && <Redirect to=\"/\" />}\n        </Route>\n        <Route exact path=\"/login\" component={Login}>\n          {loggedIn && <Redirect to=\"/\" />}\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}